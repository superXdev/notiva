(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8611:(e,s,t)=>{Promise.resolve().then(t.bind(t,18446)),Promise.resolve().then(t.bind(t,76649)),Promise.resolve().then(t.bind(t,87294))},67960:(e,s,t)=>{"use strict";t.d(s,{dj:()=>x});var r=t(73176);let a=0,l=new Map,n=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function m(e){let{...s}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=r.useState(d);return r.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},76649:(e,s,t)=>{"use strict";t.d(s,{NoteEditor:()=>W});var r=t(30004),a=t(73176),l=t(8924),n=t(80416),i=t(38347);function o(e){let{className:s,...t}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var d=t(76949),c=t(90145),m=t(41234);function x(e){let{className:s,...t}=e;return(0,r.jsx)(m.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",s),...t})}function h(e){let{className:s,...t}=e;return(0,r.jsx)(m.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function u(e){let{className:s,...t}=e;return(0,r.jsx)(m.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function p(e){let{className:s,...t}=e;return(0,r.jsx)(m.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",s),...t})}var b=t(22520),f=t(34344),g=t(65227),j=t(29414),v=t(41014),N=t(59954),w=t(68389),y=t(75413),k=t(52674),A=t(38459),S=t(88592),C=t(61928),E=t(67960),I=t(28277),_=t(59264),T=t(87190),z=t(9121),F=t(74225),P=t(82241),O=t(83937),L=t(93945);function D(e){let{content:s,isPreviewMode:t}=e,[n,i]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=s.split("\n"),t=[];e.forEach(e=>{let s=e.match(/^(#{1,6})\s+(.+)$/);if(s){let e=s[1].length,r=s[2].trim(),a="heading-".concat(r.toLowerCase().replace(/[^a-z0-9]+/g,"-"));t.push({id:a,text:r,level:e})}}),i(t)},[s]);let o=e=>{if(t){let s=document.getElementById(e.id);if(s){let e=document.getElementById("preview-container");if(e){let t=e.getBoundingClientRect(),r=s.getBoundingClientRect(),a=e.scrollTop+r.top-t.top-20;e.scrollTo({top:a,behavior:"smooth"})}}}};return 0===n.length?null:(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"ghost",size:"sm",className:"h-8",children:[(0,r.jsx)(O.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Outline"}),(0,r.jsx)("span",{className:"sm:hidden",children:"TOC"})]})}),(0,r.jsxs)(c.SQ,{align:"end",className:"w-64 max-h-80 overflow-y-auto",children:[n.map((e,s)=>(0,r.jsx)(c._2,{onClick:()=>o(e),className:"flex items-start py-2 cursor-pointer",disabled:!t,children:(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)(L.A,{className:"h-3 w-3 mr-2 text-muted-foreground flex-shrink-0"}),(0,r.jsx)("div",{className:"text-sm truncate",style:{paddingLeft:"".concat((e.level-1)*12,"px"),opacity:e.level>2?.8:1},children:e.text})]})},"".concat(e.id,"-").concat(s))),!t&&(0,r.jsx)("div",{className:"px-2 py-1 text-xs text-muted-foreground border-t border-border mt-1",children:"Switch to Preview mode to navigate"})]})]})}var M=t(78124),U=t(19333),$=t(87016);function q(e){let{currentFolderId:s,onMove:t,disabled:n=!1}=e,{folders:o}=(0,C.b)(),[d,m]=(0,a.useState)(!1);o.find(e=>e.id===s);let x={id:void 0,name:"All Notes"},h=async e=>{if(e!==s){m(!0);try{await t(e)}finally{m(!1)}}},u=(e=>{if(!e)return[x];let s=[],t=o.find(s=>s.id===e);for(;t;)s.unshift(t),t=t.parentId&&o.find(e=>e.id===t.parentId)||void 0;return[x,...s]})(s);return(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"ghost",size:"sm",disabled:n||d,className:"flex items-center gap-2",children:[(0,r.jsx)(M.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Move to"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Move"})]})}),(0,r.jsxs)(c.SQ,{align:"end",className:"w-64",children:[(0,r.jsxs)("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground border-b border-border mb-1",children:["Current:"," ",u.map((e,s)=>(0,r.jsxs)("span",{children:[s>0&&(0,r.jsx)(g.A,{className:"h-3 w-3 inline mx-1"}),(0,r.jsx)("span",{className:(0,i.cn)("text-foreground",s===u.length-1&&"font-semibold"),children:e.name})]},e.id||"root"))]}),(0,r.jsx)(c.mB,{}),(0,r.jsxs)(c._2,{onClick:()=>h(void 0),disabled:!s||d,className:"flex items-center gap-2",children:[(0,r.jsx)(U.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"All Notes"})]}),(0,r.jsx)(c.mB,{}),0===o.length?(0,r.jsx)("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No folders available"}):o.map(e=>(0,r.jsxs)(c._2,{onClick:()=>h(e.id),disabled:e.id===s||d,className:"flex items-center gap-2",children:[(0,r.jsx)($.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"truncate",children:e.name})]},e.id))]})]})}var B=t(79773),Q=t(91638);let R=[{type:"improve",label:"Improve Writing",description:"Fix grammar, improve clarity and readability"},{type:"expand",label:"Expand Content",description:"Add more detail and context"},{type:"summarize",label:"Summarize",description:"Create a concise summary"},{type:"format",label:"Format Markdown",description:"Add proper markdown structure"}];function V(e){let{content:s,onEnhance:t,disabled:n=!1}=e,[i,o]=(0,a.useState)(!1),{toast:d}=(0,E.dj)(),m=async e=>{if(!s.trim()){d({title:"No content to enhance",description:"Please add some content to your note first.",variant:"destructive"});return}o(!0);try{let r=await fetch("/api/ai/enhance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:s,enhancementType:e})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to enhance content")}let{enhancedContent:a}=await r.json();t(a);let l=R.find(s=>s.type===e);d({title:"Content enhanced!",description:"Your note has been ".concat(null==l?void 0:l.label.toLowerCase(),".")})}catch(e){console.error("Enhancement error:",e),d({title:"Enhancement failed",description:e instanceof Error?e.message:"Please try again.",variant:"destructive"})}finally{o(!1)}};return(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"default",size:"sm",disabled:n||i,className:"gap-2 bg-blue-700 hover:bg-blue-700 text-white border-blue-700 hover:border-blue-700 dark:bg-blue-700 dark:hover:bg-blue-700 dark:text-white dark:border-blue-700 dark:hover:border-blue-700",children:[i?(0,r.jsx)(B.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(Q.A,{className:"h-4 w-4"}),i?"Enhancing...":"AI Enhance"]})}),(0,r.jsx)(c.SQ,{align:"end",className:"w-56",children:R.map(e=>(0,r.jsxs)(c._2,{onClick:()=>m(e.type),disabled:i,className:"flex flex-col items-start gap-1 p-3",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]},e.type))})]})}function W(){let{selectedNote:e,labels:s,folders:t,updateNote:i,deleteNote:m,selectNote:O,refreshFolderCount:L,refreshNoteCounts:M}=(0,C.b)(),{toast:U}=(0,E.dj)(),[$,B]=(0,a.useState)(""),[Q,R]=(0,a.useState)(""),[W,Y]=(0,a.useState)(!1),[K,X]=(0,a.useState)(!1),[G,H]=(0,a.useState)(!1),[J,Z]=(0,a.useState)("edit"),[ee,es]=(0,a.useState)([]),[et,er]=(0,a.useState)(-1);(0,a.useEffect)(()=>{e?(B(e.title||""),R(e.content||"")):(B(""),R("")),Y(!1),es([]),er(-1)},[null==e?void 0:e.id,null==e?void 0:e.title,null==e?void 0:e.content,null==e?void 0:e.updatedAt]),(0,a.useEffect)(()=>{e?Y($!==(e.title||"")||Q!==(e.content||"")):Y(!1)},[$,Q,null==e?void 0:e.title,null==e?void 0:e.content,null==e?void 0:e.updatedAt]);let ea=(0,a.useCallback)(async()=>{if(e&&W)try{let s=await i(e.id,{title:$,content:Q});Y(!1),s&&(B(s.title||""),R(s.content||""))}catch(e){console.error("Failed to save note:",e)}},[e,W,$,Q,i]),el=async()=>{if(e)try{await m(e.id)}catch(e){console.error("Failed to delete note:",e)}},en=async()=>{if(e){X(!0);try{await (0,P.Q)({title:$||"Untitled Note",content:Q,labels:e.labels,createdAt:e.createdAt,updatedAt:e.updatedAt})}catch(e){console.error("Failed to export PDF:",e)}finally{X(!1)}}},ei=async()=>{if(e){H(!0);try{await i(e.id,{published:!e.published}),U({title:e.published?"Note unpublished":"Note published",description:e.published?"Your note is no longer publicly accessible.":"Your note is now publicly accessible."})}catch(e){console.error("Failed to publish note:",e),U({title:"Failed to publish note",description:"Please try again.",variant:"destructive"})}finally{H(!1)}}},eo=()=>(null==e?void 0:e.published)?"".concat(window.location.origin,"/published/").concat(e.id):null,ed=async s=>{if(e&&!e.labels.includes(s))try{await i(e.id,{labels:[...e.labels,s]})}catch(e){console.error("Failed to add label:",e)}},ec=async s=>{if(e)try{await i(e.id,{labels:e.labels.filter(e=>e!==s)})}catch(e){console.error("Failed to remove label:",e)}},em=async s=>{if(e)try{let t=e.folderId;console.log("Moving note from folder ".concat(t," to folder ").concat(s));let r=await i(e.id,{folderId:s});console.log("Note updated:",r),console.log("Forcing complete count refresh after move..."),await M(),console.log("Complete count refresh finished")}catch(e){console.error("Failed to move note:",e)}},ex=e=>{es(s=>{let t=s.slice(0,et+1);return t.push(e),t.slice(-10)}),er(e=>Math.min(e+1,9))};(0,a.useEffect)(()=>{let s=setTimeout(()=>{Q&&e&&ex(Q)},1e3);return()=>clearTimeout(s)},[Q,null==e?void 0:e.id]);let eh=e=>{if(!e)return[];let s=[],r=t.find(s=>s.id===e);for(;r;)s.unshift(r),r=r.parentId&&t.find(e=>e.id===r.parentId)||void 0;return s};return((0,a.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),ea())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ea]),e)?(0,r.jsxs)("div",{className:"flex-1 flex flex-col bg-background min-w-0 overflow-hidden",children:[(0,r.jsxs)("div",{className:"border-b border-border",children:[(0,r.jsxs)("div",{className:"md:hidden p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold truncate flex-1",children:$||"Untitled Note"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[W&&(0,r.jsx)(l.$,{onClick:ea,size:"sm",children:(0,r.jsx)(f.A,{className:"h-4 w-4"})}),(0,r.jsx)(q,{currentFolderId:e.folderId,onMove:em})]})]}),e.folderId&&(0,r.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground px-3",children:[eh(e.folderId).map((e,s)=>(0,r.jsxs)("span",{className:"flex items-center",children:[s>0&&(0,r.jsx)(g.A,{className:"h-3 w-3 mx-1"}),(0,r.jsx)("span",{className:"truncate",children:e.name})]},e.id)),(0,r.jsx)(g.A,{className:"h-3 w-3 mx-1"})]})]}),(0,r.jsxs)("div",{className:"hidden md:block p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[e.folderId&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mb-1",children:[eh(e.folderId).map((e,s)=>(0,r.jsxs)("span",{className:"flex items-center",children:[s>0&&(0,r.jsx)(g.A,{className:"h-3 w-3 mx-1"}),(0,r.jsx)("span",{className:"truncate",children:e.name})]},e.id)),(0,r.jsx)(g.A,{className:"h-3 w-3 mx-1"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{value:$,onChange:e=>B(e.target.value),className:"text-lg font-semibold border-none bg-transparent p-0 focus-visible:ring-0",placeholder:"Untitled note"}),e.published&&(0,r.jsxs)(d.E,{variant:"outline",className:"text-xs",children:[(0,r.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"Published"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[W&&(0,r.jsxs)(l.$,{onClick:ea,size:"sm",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-1"}),"Save"]}),(0,r.jsx)(q,{currentFolderId:e.folderId,onMove:em}),(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsx)(l.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(v.A,{className:"h-4 w-4"})})}),(0,r.jsxs)(c.SQ,{children:[(0,r.jsx)(c._2,{onClick:ei,disabled:G,children:e.published?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2"}),G?"Unpublishing...":"Unpublish"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),G?"Publishing...":"Publish"]})}),e.published&&(0,r.jsxs)(c._2,{onClick:async()=>{let e=eo();if(e)try{await navigator.clipboard.writeText(e),U({title:"Link copied!",description:"The published note link has been copied to your clipboard."})}catch(e){U({title:"Failed to copy link",description:"Please try again or copy the link manually.",variant:"destructive"})}},children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),(0,r.jsxs)(c._2,{onClick:en,disabled:K,children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),K?"Exporting...":"Export as PDF"]}),(0,r.jsxs)(c._2,{onClick:el,className:"text-destructive",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Delete Note"]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.labels.map(e=>{let t=s.find(s=>s.name===e);return(0,r.jsxs)(d.E,{variant:"secondary",className:"cursor-pointer",style:t?{backgroundColor:t.color+"20",color:t.color}:{},onClick:()=>ec(e),children:[(0,r.jsx)(A.A,{className:"h-3 w-3 mr-1"}),e,(0,r.jsx)("span",{className:"ml-1 text-xs opacity-70",children:"\xd7"})]},e)})}),(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"ghost",size:"sm",children:[(0,r.jsx)(A.A,{className:"h-4 w-4 mr-1"}),"Add Label"]})}),(0,r.jsxs)(c.SQ,{children:[s.filter(s=>!e.labels.includes(s.name)).map(e=>(0,r.jsxs)(c._2,{onClick:()=>ed(e.name),children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name]},e.id)),0===s.filter(s=>!e.labels.includes(s.name)).length&&(0,r.jsx)(c._2,{disabled:!0,children:"No available labels"})]})]})]})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden min-w-0",children:(0,r.jsxs)(x,{defaultValue:"edit",value:J,onValueChange:Z,className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"mx-3 md:mx-4 mt-3 md:mt-4 flex items-center justify-between",children:[(0,r.jsxs)(h,{className:"w-fit",children:[(0,r.jsxs)(u,{value:"edit",className:"text-sm",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]}),(0,r.jsxs)(u,{value:"preview",className:"text-sm",children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Preview"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:()=>{if(et>0){let e=et-1;er(e),R(ee[e]),Y(!0)}},disabled:!(et>0),className:"gap-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Undo"})]}),(0,r.jsx)(V,{content:Q,onEnhance:e=>{ex(Q),R(e),Y(!0)},disabled:!Q.trim()}),(0,r.jsx)(D,{content:Q,isPreviewMode:"preview"===J})]})]}),(0,r.jsxs)(p,{value:"edit",className:"flex-1 m-0 p-3 md:p-4 overflow-hidden min-w-0",children:[(0,r.jsx)("div",{className:"md:hidden mb-3",children:(0,r.jsx)(n.p,{value:$,onChange:e=>B(e.target.value),className:"text-base font-semibold",placeholder:"Untitled note"})}),(0,r.jsx)("div",{className:"h-full overflow-hidden min-w-0",children:(0,r.jsx)(o,{value:Q,onChange:e=>R(e.target.value),placeholder:"Start writing your note in Markdown...",className:"w-full h-full resize-none border-none bg-transparent focus-visible:ring-0 font-mono text-sm leading-relaxed overflow-y-auto",style:{wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",overflowX:"hidden"}})})]}),(0,r.jsx)(p,{value:"preview",className:"flex-1 m-0 p-3 md:p-4 overflow-auto",id:"preview-container",children:(0,r.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none  prose-headings:text-foreground prose-headings:font-semibold prose-h1:text-2xl prose-h1:border-b prose-h1:border-border prose-h1:pb-2 prose-h2:text-xl prose-h2:border-b prose-h2:border-border prose-h2:pb-1 prose-h3:text-lg prose-h4:text-base prose-h5:text-sm prose-h6:text-sm prose-p:text-foreground prose-p:leading-relaxed prose-strong:text-foreground prose-strong:font-semibold prose-em:text-foreground prose-em:italic prose-a:text-primary prose-a:underline hover:prose-a:text-primary/80 prose-blockquote:border-l-primary prose-blockquote:bg-muted/50 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r prose-code:text-foreground prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:before:content-none prose-code:after:content-none prose-pre:border prose-pre:border-border prose-pre:rounded-lg prose-pre:p-0 prose-ul:text-foreground prose-ol:text-foreground prose-li:text-foreground prose-hr:border-border prose-hr:my-6 prose-img:rounded-lg prose-img:border prose-img:border-border",children:(0,r.jsx)(I.oz,{remarkPlugins:[_.A,T.A],components:{code(e){let{node:s,inline:t,className:a,children:l,...n}=e,i=/language-(\w+)/.exec(a||"");return!t&&i?(0,r.jsx)("div",{className:"not-prose my-4",children:(0,r.jsx)(z.A,{style:{...F.A,'pre[class*="language-"]':{...F.A['pre[class*="language-"]'],background:"transparent"},'code[class*="language-"]':{...F.A['code[class*="language-"]'],background:"transparent"}},language:i[1],PreTag:"div",className:"rounded-lg border border-border overflow-hidden",customStyle:{margin:0,padding:"1rem",background:"transparent",fontSize:"0.875rem",lineHeight:"1.5"},...n,children:String(l).replace(/\n$/,"")})}):(0,r.jsx)("code",{className:"text-foreground px-1.5 py-0.5 rounded text-sm font-mono",...n,children:l})},table(e){let{children:s}=e;return(0,r.jsx)("div",{className:"not-prose my-6 overflow-x-auto",children:(0,r.jsx)("table",{className:"w-full border-collapse border border-border rounded-lg overflow-hidden",children:s})})},thead(e){let{children:s}=e;return(0,r.jsx)("thead",{className:"bg-muted",children:s})},th(e){let{children:s}=e;return(0,r.jsx)("th",{className:"border-r border-border last:border-r-0 px-4 py-3 text-left font-semibold text-foreground",children:s})},td(e){let{children:s}=e;return(0,r.jsx)("td",{className:"border-r border-border border-t last:border-r-0 px-4 py-3 text-foreground",children:s})},blockquote(e){let{children:s}=e;return(0,r.jsx)("blockquote",{className:"not-prose border-l-4 border-primary bg-muted/50 pl-4 pr-4 py-3 my-4 rounded-r italic text-muted-foreground",children:s})},ul(e){let{children:s}=e;return(0,r.jsx)("ul",{className:"list-disc list-outside space-y-0.5 ml-6 my-1",children:s})},ol(e){let{children:s}=e;return(0,r.jsx)("ol",{className:"list-decimal list-outside space-y-0.5 ml-6 my-1",children:s})},li(e){let{children:s,...t}=e;if("object"==typeof s&&Array.isArray(s)){let e=s[0];if(e&&"object"==typeof e&&"type"in e&&"input"===e.type)return(0,r.jsx)("li",{className:"flex items-start space-x-2 list-none ml-0",...t,children:s})}return(0,r.jsx)("li",{className:"text-foreground leading-relaxed",...t,children:s})},input(e){let{type:s,checked:t,...a}=e;return"checkbox"===s?(0,r.jsx)("input",{type:"checkbox",checked:t,readOnly:!0,className:"mt-1 accent-primary cursor-default",...a}):(0,r.jsx)("input",{type:s,...a})},h1(e){let{children:s}=e,t=String(s),a="heading-".concat(t.toLowerCase().replace(/[^a-z0-9]+/g,"-"));return(0,r.jsx)("h1",{id:a,className:"text-2xl font-semibold border-b border-border pb-2 mb-4",children:s})},h2(e){let{children:s}=e,t=String(s),a="heading-".concat(t.toLowerCase().replace(/[^a-z0-9]+/g,"-"));return(0,r.jsx)("h2",{id:a,className:"text-xl font-semibold border-b border-border pb-1 mb-3 mt-6",children:s})},h3(e){let{children:s}=e,t=String(s),a="heading-".concat(t.toLowerCase().replace(/[^a-z0-9]+/g,"-"));return(0,r.jsx)("h3",{id:a,className:"text-lg font-semibold mb-2 mt-5",children:s})},h4(e){let{children:s}=e,t=String(s),a="heading-".concat(t.toLowerCase().replace(/[^a-z0-9]+/g,"-"));return(0,r.jsx)("h4",{id:a,className:"text-base font-semibold mb-2 mt-4",children:s})},h5(e){let{children:s}=e,t=String(s),a="heading-".concat(t.toLowerCase().replace(/[^a-z0-9]+/g,"-"));return(0,r.jsx)("h5",{id:a,className:"text-sm font-semibold mb-1 mt-3",children:s})},h6(e){let{children:s}=e,t=String(s),a="heading-".concat(t.toLowerCase().replace(/[^a-z0-9]+/g,"-"));return(0,r.jsx)("h6",{id:a,className:"text-sm font-semibold mb-1 mt-3 text-muted-foreground",children:s})},hr:()=>(0,r.jsx)("hr",{className:"border-border my-6"}),p(e){let{children:s}=e;return(0,r.jsx)("p",{className:"leading-relaxed mb-4 text-foreground",children:s})},a(e){let{href:s,children:t}=e;return(0,r.jsx)("a",{href:s,className:"text-primary underline hover:text-primary/80 transition-colors",target:"_blank",rel:"noopener noreferrer",children:t})}},children:Q||"*No content to preview*"})})})]})}),(0,r.jsxs)("div",{className:"border-t border-border px-3 md:px-4 py-2 text-xs text-muted-foreground flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{children:W?"Unsaved changes":"Saved"}),(0,r.jsxs)("span",{className:"hidden sm:inline",children:["Last updated:"," ",new Date(e.updatedAt).toLocaleString()]})]}),(0,r.jsx)("div",{className:"md:hidden flex items-center space-x-2",children:(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsx)(l.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)(v.A,{className:"h-3 w-3"})})}),(0,r.jsxs)(c.SQ,{children:[(0,r.jsx)(c._2,{onClick:ei,disabled:G,children:e.published?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2"}),G?"Unpublishing...":"Unpublish"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),G?"Publishing...":"Publish"]})}),e.published&&(0,r.jsxs)(c._2,{onClick:async()=>{let e=eo();if(e)try{await navigator.clipboard.writeText(e),U({title:"Link copied!",description:"The published note link has been copied to your clipboard."})}catch(e){U({title:"Failed to copy link",description:"Please try again or copy the link manually.",variant:"destructive"})}},children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),(0,r.jsxs)(c._2,{onClick:en,disabled:K,children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),K?"Exporting...":"Export as PDF"]}),(0,r.jsxs)(c._2,{onClick:el,className:"text-destructive",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Delete Note"]})]})]})})]})]}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col bg-background",children:[(0,r.jsx)("div",{className:"md:hidden border-b border-border p-3 flex items-center justify-center",children:(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"Notes"})}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center px-4",children:[(0,r.jsx)(b.A,{className:"h-10 w-10 md:h-12 md:w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No note selected"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Select a note from the sidebar to start editing"})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[969,346,713,188,114,874,306,411,653,928,183,446,476,571,358],()=>s(8611)),_N_E=e.O()}]);